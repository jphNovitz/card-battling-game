<!-- Try to make a  card battling game -->
<!-- using vanilla javascript          -->
<!-- @jphNovitz                        -->
<!-- hello@jiphi.be                    -->

<html>
    <head>
        <meta charset="UTF-8"> 
        <title>card battling game @jphNovitz</title>
    </head>

    <body>

    </body>
    <script>
    /* variables definitions */
        var cards = []
        var family = ['clubs',  'spades', 'hearts', 'diamonds']
        var figures = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'queen', 'valet', 'king', 'as']
        var player_1 = {
            cards: [],
            points: 0,
            encore: true
        };
        var player_2 = {
            cards: [],
            points: 0,
            encore: true
        };


    /* end variable definitions */

        initialize()
        distribute()
        play()
        console.log(player_1)
        console.log(player_2)


    /****** functions ******/

        function initialize() {
            figures.map(function (fig) {
                for (let i = 0 ; i < 4 ; i++) {
                    let test = {
                        'family': family[i],
                        'figure': fig,
                        'value': figures.indexOf(fig)
                    }
                    cards.push(test)
                }
                
            })
        }

        function distribute() {
            while (cards.length > 0) {
                let rand = cards[Math.floor(Math.random() * cards.length)]
                let pos = cards.indexOf(rand)
                player_1.cards.push(rand)
                cards.splice(pos,1)
                
                rand = cards[Math.floor(Math.random() * cards.length)]
                pos = cards.indexOf(rand)
                player_2.cards.push(rand)
                cards.splice(pos,1)
            }   
        }

        function play(){
            while (player_2.encore){
                if (player_1.encore) {
                    let card = player_1.cards[1]
                    player_1.points += card.value
                      const visualCard = document.createElement('div')
                      visualCard.setAttribute('style', 'border: solid 1px #000')
                      visualCard.setAttribute('style', 'border: solid 1px #000 ; width: 50px ; height: 70px ; float: left ; margin-left:-2px ; margin-top: 2px')
                      const cardContent = document.createTextNode(card.figure)
                      visualCard.appendChild(cardContent)
                      document.body.appendChild(visualCard)
                    player_1.cards.splice(1,1)
                    if (player_1.cards.length === 1) {
                        player_1.encore = false
                    }
                }
                if (player_2.encore) {
                    let card = player_2.cards[1]
                    player_2.points += card.value
                    const visualCard = document.createElement('div')
                    visualCard.setAttribute('style', 'border: solid 1px #000')
                    visualCard.setAttribute('style', 'border: solid 1px #000 ; width: 50px ; height: 70px ; float: left ; margin-left:2px ; margin-top: 2px')
                    const cardContent = document.createTextNode(card.figure)
                    visualCard.appendChild(cardContent)
                    document.body.appendChild(visualCard)
                    player_2.cards.splice(1,1)
                    player_2.cards.length
                    if (player_2.cards.length == 1) {
                        player_2.encore = false
                    }
                }
            }
        
        }

        
    </script>
</html>